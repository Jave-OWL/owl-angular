<div class="seccion-registro">
    <a class="link-volver" routerLink="/"><i class="bi bi-arrow-left-circle-fill"></i> Volver a inicio</a>
    <div class="contenedor-imagen">
        <img id="logo" [src]="currentImageSrc" alt="Logo" />
    </div>
    <section class="registro-form">
        <h3>¡Bienvenido!</h3>
        <p>Regístrate para entrar al mundo financiero</p>
        
        <div *ngIf="error" class="error-message">
            {{ error }}
        </div>

        <form [formGroup]="registroForm" (ngSubmit)="onSubmit()">
            <div class="form-group">
                <label for="nombre">Nombre</label>
                <input 
                    type="text" 
                    id="nombre"
                    formControlName="nombre" 
                    placeholder="Nombre completo"
                    [class.invalid]="hasError('nombre')"
                >
                <span class="error-text" *ngIf="hasError('nombre')">
                    {{ getErrorMessage('nombre') }}
                </span>
            </div>

            <div class="form-group">
                <label for="correo">Correo</label>
                <input 
                    type="email" 
                    id="correo"
                    formControlName="correo" 
                    placeholder="ej: email@ejemplo.com"
                    [class.invalid]="hasError('correo')"
                >
                <span class="error-text" *ngIf="hasError('correo')">
                    {{ getErrorMessage('correo') }}
                </span>
            </div>

            <div class="form-group">
                <label for="contrasena">Contraseña</label>
                <input 
                    type="password" 
                    id="contrasena"
                    formControlName="contrasena" 
                    placeholder="Ingresa tu contraseña"
                    [class.invalid]="hasError('contrasena')"
                >
                <span class="error-text" *ngIf="hasError('contrasena')">
                    {{ getErrorMessage('contrasena') }}
                </span>
            </div>

            <div class="form-group">
                <label for="confirmarContrasena">Confirmar Contraseña</label>
                <input 
                    type="password" 
                    id="confirmarContrasena"
                    formControlName="confirmarContrasena" 
                    placeholder="Confirma tu contraseña"
                    [class.invalid]="hasError('confirmarContrasena') || showPasswordError()"
                >
                <span class="error-text" *ngIf="showPasswordError()">
                    Las contraseñas no coinciden
                </span>
            </div>

                <div class="form-group">
                    <label for="fechaNacimiento">Fecha de nacimiento</label>
                    <input 
                        type="date" 
                        id="fechaNacimiento"
                        formControlName="fechaNacimiento" 
                        [class.invalid]="hasError('fechaNacimiento')"
                    >
                    <span class="error-text" *ngIf="hasError('fechaNacimiento')">
                        {{ getErrorMessage('fechaNacimiento') }}
                    </span>
                </div>

            <button type="submit" [disabled]="loading || registroForm.invalid">
                <span *ngIf="!loading">Registrar</span>
                <span *ngIf="loading">Registrando...</span>
            </button>
        </form>

        <p class="registro">¿Ya tienes cuenta? <a routerLink="/auth/inicio-de-sesion">Inicia Sesión</a></p>
    </section>
</div>