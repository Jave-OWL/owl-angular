<div class="container">
    <div class="contenedor-imagen">
        <img id="logo" src="assets/images/OwlSerio.png" alt="Logo" />
    </div>
    <section class="cuestionario">
        <h1>Perfil de Riesgo</h1>

        <div class="pregunta-paginas" [ngSwitch]="currentPage">
            <!-- Página 1 -->
            <div class="progress">
                <div class="progress-bar" role="progressbar" 
                    [style.width]="(currentPage/(numPreguntas + 1))*100 + '%'"
                    [style.backgroundColor]="getColorProgreso()"
                    [attr.aria-valuenow]="currentPage" 
                    aria-valuemin="0" 
                    [attr.aria-valuemax]="numPreguntas"></div>
            </div>

            <ng-container *ngFor="let pregunta of preguntas; let i = index">
                <div class="pregunta-pagina" *ngSwitchCase="i + 1">
                    <p class="pregunta-texto">
                        <ng-container *ngFor="let parte of pregunta.partes">
                            <ng-container *ngIf="isPreguntaParte(parte); else textoNormal">
                            <span class="tooltip-palabra" [attr.data-tooltip]="parte.definicion">{{ parte.palabra }}</span>
                            </ng-container>
                            <ng-template #textoNormal>{{ parte }}</ng-template>
                        </ng-container>
                    </p>
                    <div class="opciones">
                        <p id="texto-izq" class="texto-opcion">De Acuerdo</p>
                        <input class="seleccion" id="opcion-grande" type="radio" [name]="'pregunta' + (i + 1)" [(ngModel)]="answers[i]"
                            value="5">
                        <input class="seleccion" id="opcion-media" type="radio" [name]="'pregunta' + (i + 1)" [(ngModel)]="answers[i]"
                            value="4">
                        <input class="seleccion" id="opcion-pequeña" type="radio" [name]="'pregunta' + (i + 1)" [(ngModel)]="answers[i]"
                            value="3">
                        <input class="seleccion" id="opcion-media-d" type="radio" [name]="'pregunta' + (i + 1)" [(ngModel)]="answers[i]"
                            value="2">
                        <input class="seleccion" id="opcion-grande-d" type="radio" [name]="'pregunta' + (i + 1)" [(ngModel)]="answers[i]"
                            value="1">
                        <p id="texto-der" class="texto-opcion">En Desacuerdo</p>
                    </div>
                </div>
            </ng-container>

        </div>
        <!-- Navegación -->
        <div class="navigation">
            <button class="btn btn-primary" (click)="previousPage()" [disabled]="currentPage === 1">Anterior</button>
            <span class="page-indicator">{{ currentPage }} / {{ numPreguntas }}</span>
            <button class="btn btn-primary" (click)="nextPage()" *ngIf="currentPage < numPreguntas">Siguiente</button>
            <button class="btn btn-success" (click)="submitAnswers()" *ngIf="currentPage === numPreguntas">Finalizar</button>
        </div>
    </section>
</div>